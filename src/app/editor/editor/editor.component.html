<mat-card class="card">
  <div>
    <mat-checkbox [checked]="showAll" (change)="onShowAllClick($event.checked)">显示已翻译过的</mat-checkbox>
  </div>
  <div>
    <button mat-raised-button color="accent" *ngIf="editorService.notCommited.length > 0" (click)="commit()">提交</button>
  </div>
</mat-card>

<table mat-table [dataSource]="textList" class="table">
  <ng-container matColumnDef="desc">
    <th mat-header-cell *matHeaderCellDef> 杂项 </th>
    <td mat-cell *matCellDef="let text">
      <p style="margin:0">{{ text.desc }} </p>
    </td>
  </ng-container>
  <ng-container matColumnDef="origin">
    <th mat-header-cell *matHeaderCellDef> 原文 </th>
    <td mat-cell *matCellDef="let text">
      <p style="margin:0" *ngFor="let t of text.rawCommit.text.split('\\n')">{{ t }} </p>
    </td>
  </ng-container>
  <ng-container matColumnDef="trans">
    <th mat-header-cell *matHeaderCellDef> 译文 </th>
    <td mat-cell *matCellDef="let text">
      <textarea class="full-width" matInput [value]="text.notCommited?text.notCommited.text:(text.translatedCommit? text.translatedCommit.text:'')"
        (blur)="onTextareaBlur(text,$event.target.value)" cdkTextareaAutosize></textarea>
    </td>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;" [ngStyle]="{background:row.notCommited ? '#FFCDD2' : (row.translatedCommit ? '#C8E6C9' : null)}"></tr>
</table>
